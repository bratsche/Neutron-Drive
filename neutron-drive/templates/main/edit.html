<!doctype html>{% load url from future %}{% load static ntags %}
<html>
  <head>
    <link rel="stylesheet" href="{% static "bootstrap/css/bootstrap.min.css" %}"></link>
    <link rel="stylesheet" href="{% static "css/edit.css" %}">
    <title>Neutron Drive</title>
  </head>
  <body>
    <div>
      <div id="top_wrapper">
        <nav>
          <div class="btn-toolbar">
            <div class="name">Neutron Drive 12.08</div>
            <div class="btn-group">
              <button class="btn" type="button" onclick="open_picker()"><i class="icon-download"></i> Open</button>
              <button class="btn" type="button" onclick="save_current()"><i class="icon-upload"></i> Save</button>
              <button class="btn" type="button"><i class="icon-circle-arrow-up"></i> Save All</button>
              <button class="btn" type="button"><i class="icon-remove"></i> Close All</button>
            </div>
            <div class="btn-group">
              <a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript: void(0);">
                <i class="icon-wrench"></i>
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
                <li>
                  <a data-toggle="modal" href="#prefModal">
                    <i class="icon-cog"></i>
                    Preferences
                  </a>
                </li>
                <li class="divider"></li>
                <li>
                  <a data-toggle="modal" href="#modeModal">
                    <i class="icon-align-justify"></i>
                    Editor Mode
                  </a>
                </li>
                <li class="divider"></li>
                <li>
                  <a data-toggle="modal" href="#aboutModal">
                    <i class="icon-flag"></i>
                    About  
                  </a>
                </li>
              </ul>
            </div>
          </div>
          <div id="message_center"></div>
        </nav>
        <div id="tab_bar"></div>
      </div>
      <div id="ace_wrapper">
        <div id="ace_div"></div>
      </div>
    </div>
    {% include "main/modals.html" %}
    <script src="https://www.google.com/jsapi" charset="utf-8"></script>
    <script type="text/javascript" src="{% static "ace/src-min/ace.js" %}"></script>
    {% for mode in MODES %}
    {% if mode.0 != 'text' %}
    <script src="{% static "ace/src-min/mode-"|add:mode.0|add:".js" %}" type="text/javascript"></script>
    {% endif %}{% endfor %}
    <script src="{% static "ace/src-min/theme-" %}{{ prefs.theme }}.js" type="text/javascript"></script>
    <script type="text/javascript" src="{% static "ace/src-min/keybinding-emacs.js" %}"></script>
    <script type="text/javascript" src="{% static "ace/src-min/keybinding-vim.js" %}"></script>
    <script type="text/javascript">
      var ndrive = {};
      ndrive.CLIENT_ID = {{ CLIENT_ID }};
      ndrive.negotiator = '{% url "shatner" %}';
      ndrive.prefs = '{% url "prefs" %}';
      
      var STATIC_URL = '{{ request.static_url }}';
      var LOADED_THEMES = ['{{ prefs.theme }}'];
      var PREFS = {
        theme: '{{ prefs.theme }}',
        fontsize: '{{ prefs.fontsize }}',
        keybind: '{{ prefs.keybind }}',
        swrap: '{{ prefs.swrap }}',
        tabsize: {{ prefs.tabsize }},
        
        hactive: {{ prefs.hactive|js_bool }},
        hword: {{ prefs.hword|js_bool }},
        invisibles: {{ prefs.invisibles|js_bool }},
        gutter: {{ prefs.gutter|js_bool }},
        pmargin: {{ prefs.pmargin|js_bool }},
        softab: {{ prefs.softab|js_bool }},
        behave: {{ prefS.behave|js_bool }},
        
        save_session: {{ prefs.save_session|js_bool }},
      };
      
      google.load('picker', '1');
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script src="{% static "bootstrap/js/bootstrap.min.js" %}" type="text/javascript"></script>
    <script src="{% static "js/boring_stuff.js" %}" type="text/javascript"></script>
    <script src="{% static "js/tabs.js" %}" type="text/javascript"></script>
    <script src="{% static "js/default.js" %}" type="text/javascript"></script>
  </body>
</html>
